@main.route('/reset', methods=["GET", "POST"])
def reset():
    form = EmailForm()
    if form.validate_on_submit():
        user = Bureau.query.filter_by(email=form.email.data).first()         
        if user:
            token = generate_confirmation_token(user.email)
            confirm_url = url_for('main.confirm_email', token=token, _external=True)
            html = render_template('activate.html', confirm_url=confirm_url)
            subject = "Please confirm your email"
            send_email(user.email, subject, html)
           
        else:
            flash('Your email address must be confirmed before attempting a password reset. got to your email account and confirm using the link', 'error')
            return redirect(url_for('auth.login_page'))
 
    return render_template('password_reset_email.html', form=form)